<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Corruption in Germany: Open-Access Resources & Essay Assistant</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Reset & Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      --primary-color: #0057b8;
      --secondary-color: #ffcc00;
      --accent-color: #4CAF50;
      --light-color: #f5f5f5;
      --dark-color: #333;
      --gray-color: #666;
      --light-gray: #e0e0e0;
      --shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      --border-radius: 8px;
      --transition: all 0.3s ease;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: var(--dark-color);
      background-color: #f9f9f9;
      padding-bottom: 40px;
    }
    
    /* Typography */
    h1, h2, h3, h4 {
      color: var(--primary-color);
      margin-bottom: 1rem;
    }
    
    h1 {
      font-size: 2.2rem;
      border-bottom: 3px solid var(--secondary-color);
      padding-bottom: 0.5rem;
    }
    
    h2 {
      font-size: 1.8rem;
      margin-top: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid var(--light-gray);
    }
    
    h3 {
      font-size: 1.4rem;
      color: var(--gray-color);
    }
    
    p {
      margin-bottom: 1rem;
    }
    
    a {
      color: var(--primary-color);
      text-decoration: none;
      transition: var(--transition);
    }
    
    a:hover {
      color: var(--secondary-color);
      text-decoration: underline;
    }
    
    /* Layout */
    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    /* Header */
    header {
      background: linear-gradient(135deg, var(--primary-color), #003d82);
      color: white;
      padding: 2rem 0;
      margin-bottom: 2rem;
      box-shadow: var(--shadow);
    }
    
    header h1 {
      color: white;
      border-bottom: 3px solid var(--secondary-color);
    }
    
    .subtitle {
      font-size: 1.2rem;
      color: rgba(255, 255, 255, 0.9);
      margin-top: 0.5rem;
    }
    
    /* Navigation */
    nav {
      margin-top: 1.5rem;
    }
    
    nav ul {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      list-style: none;
    }
    
    nav li {
      flex: 1;
      min-width: 200px;
    }
    
    nav a {
      display: block;
      background-color: rgba(255, 255, 255, 0.1);
      padding: 12px 15px;
      border-radius: var(--border-radius);
      color: white;
      text-decoration: none;
      transition: var(--transition);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    nav a:hover {
      background-color: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
      text-decoration: none;
    }
    
    nav a i {
      margin-right: 8px;
    }
    
    /* Main Content */
    main {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;
    }
    
    @media (min-width: 768px) {
      main {
        grid-template-columns: 2fr 1fr;
      }
    }
    
    section {
      background-color: white;
      border-radius: var(--border-radius);
      padding: 1.5rem;
      box-shadow: var(--shadow);
      margin-bottom: 1.5rem;
    }
    
    /* Forms */
    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    label {
      font-weight: 600;
      color: var(--gray-color);
    }
    
    input, select, textarea {
      padding: 12px 15px;
      border: 1px solid var(--light-gray);
      border-radius: var(--border-radius);
      font-size: 1rem;
      transition: var(--transition);
    }
    
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(0, 87, 184, 0.2);
    }
    
    button {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: var(--border-radius);
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    button:hover {
      background-color: #004494;
      transform: translateY(-2px);
    }
    
    button.secondary {
      background-color: var(--secondary-color);
      color: var(--dark-color);
    }
    
    button.secondary:hover {
      background-color: #e6b800;
    }
    
    button.accent {
      background-color: var(--accent-color);
    }
    
    button.accent:hover {
      background-color: #3d8b40;
    }
    
    /* Results & Output */
    .output-box {
      background-color: var(--light-color);
      border-radius: var(--border-radius);
      padding: 1.5rem;
      margin-top: 1.5rem;
      border-left: 5px solid var(--primary-color);
      max-height: 500px;
      overflow-y: auto;
    }
    
    .output-box h3 {
      margin-top: 0;
    }
    
    .output-box ol, .output-box ul {
      padding-left: 1.5rem;
      margin-bottom: 1rem;
    }
    
    .output-box li {
      margin-bottom: 0.5rem;
    }
    
    /* Upload Section */
    .upload-area {
      border: 2px dashed var(--light-gray);
      border-radius: var(--border-radius);
      padding: 2rem;
      text-align: center;
      margin-bottom: 1rem;
      transition: var(--transition);
    }
    
    .upload-area:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 87, 184, 0.05);
    }
    
    .upload-area i {
      font-size: 3rem;
      color: var(--gray-color);
      margin-bottom: 1rem;
    }
    
    .file-list {
      list-style: none;
      margin-top: 1rem;
    }
    
    .file-list li {
      padding: 10px 15px;
      background-color: var(--light-color);
      border-radius: var(--border-radius);
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .file-list .file-name {
      font-weight: 600;
    }
    
    .file-list .file-size {
      color: var(--gray-color);
      font-size: 0.9rem;
    }
    
    /* Features Section */
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .feature-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background-color: var(--light-color);
      border-radius: var(--border-radius);
    }
    
    .feature-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
    }
    
    /* Articles Preview */
    .article-preview {
      margin-top: 1.5rem;
    }
    
    .article-item {
      padding: 1rem;
      background-color: white;
      border-radius: var(--border-radius);
      border: 1px solid var(--light-gray);
      margin-bottom: 1rem;
      transition: var(--transition);
    }
    
    .article-item:hover {
      box-shadow: var(--shadow);
      transform: translateY(-2px);
    }
    
    .article-title {
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 0.5rem;
    }
    
    .article-meta {
      font-size: 0.9rem;
      color: var(--gray-color);
      margin-bottom: 0.5rem;
      display: flex;
      gap: 15px;
    }
    
    .article-excerpt {
      font-size: 0.95rem;
      line-height: 1.5;
      color: var(--dark-color);
    }
    
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.5);
    }
    
    .modal-content {
      background-color: white;
      margin: 10% auto;
      padding: 30px;
      border-radius: var(--border-radius);
      width: 90%;
      max-width: 700px;
      position: relative;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      animation: modalopen 0.3s;
    }
    
    @keyframes modalopen {
      from {opacity: 0; transform: translateY(-50px);}
      to {opacity: 1; transform: translateY(0);}
    }
    
    .close-modal {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 28px;
      font-weight: bold;
      color: var(--gray-color);
      cursor: pointer;
      transition: var(--transition);
    }
    
    .close-modal:hover {
      color: var(--dark-color);
    }
    
    /* Footer */
    footer {
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid var(--light-gray);
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: space-between;
      align-items: center;
    }
    
    .footer-info {
      color: var(--gray-color);
      font-size: 0.9rem;
    }
    
    /* Positionality Examples */
    .positionality-example {
      background-color: #f0f7ff;
      border-radius: var(--border-radius);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      border-left: 5px solid var(--accent-color);
    }
    
    .positionality-example h4 {
      margin-top: 0;
      color: var(--accent-color);
    }
    
    .example-tag {
      display: inline-block;
      background-color: var(--accent-color);
      color: white;
      padding: 3px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    /* Mobile adjustments */
    @media (max-width: 767px) {
      h1 {
        font-size: 1.8rem;
      }
      
      h2 {
        font-size: 1.5rem;
      }
      
      nav ul {
        flex-direction: column;
      }
      
      .features {
        grid-template-columns: 1fr;
      }
      
      footer {
        flex-direction: column;
        align-items: flex-start;
      }
    }
    
    /* Print styles */
    @media print {
      .no-print {
        display: none;
      }
      
      section {
        box-shadow: none;
        border: 1px solid #ddd;
      }
      
      a {
        color: black;
        text-decoration: underline;
      }
      
      a::after {
        content: " (" attr(href) ")";
        font-size: 0.9rem;
        font-weight: normal;
      }
    }
    
    /* Accessibility */
    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      border: 0;
    }
    
    /* Focus styles for accessibility */
    button:focus, input:focus, select:focus, textarea:focus {
      outline: 3px solid var(--secondary-color);
      outline-offset: 2px;
    }
    
    /* Status messages */
    .status-message {
      padding: 10px 15px;
      border-radius: var(--border-radius);
      margin: 10px 0;
    }
    
    .status-success {
      background-color: #d4edda;
      color: #155724;
      border-left: 5px solid var(--accent-color);
    }
    
    .status-error {
      background-color: #f8d7da;
      color: #721c24;
      border-left: 5px solid #dc3545;
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>Corruption in Germany: Research & Essay Assistant</h1>
      <p class="subtitle">Open-access resources, positionality guidance, and essay tools for academic research on corruption in Germany</p>
      
      <nav aria-label="Main navigation">
        <ul>
          <li><a href="#positionality"><i class="fas fa-user-circle"></i> Positionality Guide</a></li>
          <li><a href="#articles"><i class="fas fa-newspaper"></i> Research Articles</a></li>
          <li><a href="#essay-tools"><i class="fas fa-edit"></i> Essay Tools</a></li>
          <li><a href="#resources"><i class="fas fa-external-link-alt"></i> External Resources</a></li>
        </ul>
      </nav>
    </div>
  </header>
  
  <div class="container">
    <main>
      <!-- Left Column -->
      <div class="left-column">
        <!-- Positionality Section -->
        <section id="positionality">
          <h2><i class="fas fa-user-circle"></i> Writing a Positionality Paper</h2>
          <p>Based on Dr. Adam Crymble's approach from UCL, this guide helps you reflect on your positionality when researching corruption in Germany.</p>
          
          <h3>Step 1: You and Your Positionality in Context</h3>
          
          <div class="positionality-example">
            <h4>Example Topic: Should Germany prioritize economic growth over anti-corruption measures if they slow down business?</h4>
            <div class="example-tag">Politics vs. Ethics Debate</div>
            
            <p><strong>1) You & Your Topic</strong><br>
            Which factors in your life most affect your view/attitudes/approach towards this topic?</p>
            
            <div class="features">
              <div class="feature-item">
                <input type="checkbox" id="nationality" checked>
                <label for="nationality">Nationality</label>
              </div>
              <div class="feature-item">
                <input type="checkbox" id="politics" checked>
                <label for="politics">Politics</label>
              </div>
              <div class="feature-item">
                <input type="checkbox" id="experience">
                <label for="experience">Experience</label>
              </div>
              <div class="feature-item">
                <input type="checkbox" id="education" checked>
                <label for="education">Education</label>
              </div>
              <div class="feature-item">
                <input type="checkbox" id="class">
                <label for="class">Class</label>
              </div>
              <div class="feature-item">
                <input type="checkbox" id="language">
                <label for="language">Language</label>
              </div>
            </div>
          </div>
          
          <p><strong>2) What about other people?</strong><br>
          What factors are influencing others who write/research about this topic? Take notes on the influences/world views of several authors.</p>
          
          <p><strong>3) How do you fit within that wider ecosystem of thought?</strong></p>
          
          <h3>Positionality Writing Options</h3>
          
          <div class="positionality-example">
            <h4>Option A: Lead with yourself, then contextualize</h4>
            <p>"I grew up in a small German town where local corruption scandals affected community trust in politics. This personal experience shaped my belief that transparency is essential..."</p>
          </div>
          
          <div class="positionality-example">
            <h4>Option B: Lead with someone else's position</h4>
            <p>"Sebastian Wolf's research as a political scientist has framed his worldview in ways that emphasize institutional analysis of corruption. However, my background in economics leads me to focus more on the financial incentives..."</p>
          </div>
          
          <div class="positionality-example">
            <h4>Option C: Start abstractly with relevant factors</h4>
            <p>"When considering anti-corruption measures in Germany, the key factors affecting the conversation are the historical legacy of the civil service, federal vs. state responsibilities, and EU integration pressures..."</p>
          </div>
          
          <h3>Step 2: How does this help me be better?</h3>
          <p>Outline how you could grow or learn about aspects of yourself or your beliefs that would make you a better contributor to solutions.</p>
          
          <form id="reflectionForm">
            <label for="positionalityReflection">Your Positionality Reflection:</label>
            <textarea id="positionalityReflection" rows="4" placeholder="Reflect on how your background influences your approach to corruption research..."></textarea>
            
            <label for="growthStrategy">Growth Strategy:</label>
            <select id="growthStrategy">
              <option value="compromise">Strategies for compromising</option>
              <option value="growth">Acknowledging personal growth</option>
              <option value="dig-in">Dig in your heels (with strategy)</option>
            </select>
            
            <button type="button" id="saveReflection" class="accent"><i class="fas fa-save"></i> Save Reflection</button>
          </form>
        </section>
        
        <!-- Article Previews -->
        <section id="articles">
          <h2><i class="fas fa-newspaper"></i> Research Articles</h2>
          <p>Key scholarly articles on corruption in Germany (from uploaded materials):</p>
          
          <div class="article-preview">
            <div class="article-item">
              <div class="article-title">Explaining Change in Germany's Anti-corruption Policy in the Era of Chancellor Merkel</div>
              <div class="article-meta">
                <span><i class="fas fa-user"></i> Sebastian Wolf</span>
                <span><i class="fas fa-calendar"></i> 2021</span>
                <span><i class="fas fa-tag"></i> Policy Analysis</span>
              </div>
              <div class="article-excerpt">
                Chancellor Angela Merkel's second grand coalition (2013–2017) was the most successful federal government since 2005 regarding the adoption of anti-corruption measures. This article applies the multiple streams approach to explain policy changes...
              </div>
              <button class="secondary" onclick="showArticleSummary(1)"><i class="fas fa-eye"></i> View Summary</button>
            </div>
            
            <div class="article-item">
              <div class="article-title">Corruption in Germany: The Debate in Politics and Political Science</div>
              <div class="article-meta">
                <span><i class="fas fa-user"></i> Ulrich von Alemann</span>
                <span><i class="fas fa-calendar"></i> 1995</span>
                <span><i class="fas fa-tag"></i> Political Theory</span>
              </div>
              <div class="article-excerpt">
                Examines the German debate on corruption, challenging Theodor Eschenburg's thesis about Germany's "extremely honest" civil service. Proposes understanding corruption as "shadow politics" and outlines an agenda for systematic corruption research...
              </div>
              <button class="secondary" onclick="showArticleSummary(2)"><i class="fas fa-eye"></i> View Summary</button>
            </div>
          </div>
          
          <div class="upload-area" id="uploadArea">
            <i class="fas fa-cloud-upload-alt"></i>
            <h3>Upload Additional Articles</h3>
            <p>Drag and drop PDF or text files here, or click to browse</p>
            <input type="file" id="articleUpload" multiple accept=".pdf,.txt,.doc,.docx" style="display: none;">
            <button onclick="document.getElementById('articleUpload').click()"><i class="fas fa-folder-open"></i> Browse Files</button>
          </div>
          
          <ul class="file-list" id="uploadedFiles">
            <!-- Uploaded files will appear here -->
          </ul>
        </section>
      </div>
      
      <!-- Right Column -->
      <div class="right-column">
        <!-- Essay Tools -->
        <section id="essay-tools">
          <h2><i class="fas fa-edit"></i> Essay Structure Generator</h2>
          <p>Create a structured outline for your essay on corruption in Germany.</p>
          
          <form id="essayForm">
            <label for="essayTopic">Essay Topic:</label>
            <input type="text" id="essayTopic" placeholder="e.g., The effectiveness of Germany's anti-corruption policies under Merkel" value="The effectiveness of Germany's anti-corruption policies under Merkel">
            
            <label for="essayThesis">Thesis Statement:</label>
            <textarea id="essayThesis" rows="3" placeholder="Your central argument...">While Chancellor Merkel's governments implemented significant anti-corruption reforms between 2013-2017, these changes were largely incremental and dependent on political constellations rather than a comprehensive anti-corruption strategy.</textarea>
            
            <label for="essaySections">Essay Structure (comma separated):</label>
            <input type="text" id="essaySections" value="Introduction, Historical Context, Theoretical Framework (Multiple Streams Approach), Case Study Analysis, Comparative Assessment, Limitations, Conclusion">
            
            <button type="button" id="generateEssay" class="accent"><i class="fas fa-magic"></i> Generate Essay Structure</button>
          </form>
          
          <div class="output-box" id="essayOutput">
            <h3>Your Essay Structure Will Appear Here</h3>
            <p>Fill out the form above and click "Generate Essay Structure"</p>
          </div>
        </section>
        
        <!-- Resources -->
        <section id="resources">
          <h2><i class="fas fa-external-link-alt"></i> Open-Access Resources</h2>
          <p>Free scholarly resources for corruption research:</p>
          
          <ul>
            <li><a href="https://www.semanticscholar.org/search?q=corruption%20Germany" target="_blank" rel="noopener"><i class="fas fa-graduation-cap"></i> Semantic Scholar: Corruption in Germany</a></li>
            <li><a href="https://archive.org/search.php?query=corruption+germany" target="_blank" rel="noopener"><i class="fas fa-archive"></i> Internet Archive: Corruption Germany</a></li>
            <li><a href="https://doaj.org/search?source=%7B%22query%22%3A%7B%22query_string%22%3A%7B%22query%22%3A%22corruption+germany%22%7D%7D%7D%7D" target="_blank" rel="noopener"><i class="fas fa-book-open"></i> DOAJ: Corruption Germany</a></li>
            <li><a href="https://en.wikipedia.org/wiki/Corruption_in_Germany" target="_blank" rel="noopener"><i class="fab fa-wikipedia-w"></i> Corruption in Germany (Wikipedia)</a></li>
            <li><a href="https://www.transparency.org/en/countries/germany" target="_blank" rel="noopener"><i class="fas fa-chart-line"></i> Transparency International: Germany</a></li>
          </ul>
          
          <div class="features" style="margin-top: 1.5rem;">
            <div class="feature-item">
              <input type="checkbox" id="feature1" checked>
              <label for="feature1">Open-access only</label>
            </div>
            <div class="feature-item">
              <input type="checkbox" id="feature2" checked>
              <label for="feature2">Include positionality guidance</label>
            </div>
            <div class="feature-item">
              <input type="checkbox" id="feature3">
              <label for="feature3">Enable translation</label>
            </div>
          </div>
        </section>
        
        <!-- Quick Tools -->
        <section>
          <h2><i class="fas fa-tools"></i> Quick Tools</h2>
          
          <div style="display: flex; flex-direction: column; gap: 10px;">
            <button id="copyLinkBtn"><i class="fas fa-link"></i> Copy Page Link</button>
            <button id="printBtn" class="secondary"><i class="fas fa-print"></i> Print Resources</button>
            <button id="accessibilityBtn"><i class="fas fa-universal-access"></i> Accessibility Info</button>
            <button onclick="showPositionalityTips()"><i class="fas fa-lightbulb"></i> Positionality Tips</button>
          </div>
          
          <div id="copyStatus" class="status-message" style="display: none;"></div>
        </section>
      </div>
    </main>
    
    <footer>
      <div class="footer-info">
        <p><strong>Corruption in Germany Research Tool</strong><br>
        An open-access resource for academic research and essay writing. No server code, no paid APIs. All processing happens in your browser.</p>
      </div>
      
      <div>
        <button id="resetBtn" class="secondary"><i class="fas fa-redo"></i> Reset All</button>
      </div>
    </footer>
  </div>
  
  <!-- Article Summary Modal -->
  <div class="modal" id="articleModal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeModal()">&times;</span>
      <div id="modalContent">
        <!-- Modal content will be inserted here -->
      </div>
    </div>
  </div>
  
  <!-- Accessibility Modal -->
  <div class="modal" id="accessibilityModal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeAccessibilityModal()">&times;</span>
      <h2><i class="fas fa-universal-access"></i> Accessibility & Credits</h2>
      
      <ul style="margin: 1.5rem 0; padding-left: 1.5rem;">
        <li>All article links are open-access/free (Semantic Scholar, Internet Archive, DOAJ)</li>
        <li>Translation available via browser tools or Google Translate</li>
        <li>All preview and upload features are client-side only—no server code, no paid APIs</li>
        <li>Accessible navigation, modals, and dynamic controls</li>
        <li>Keyboard navigation support (Tab, Enter, Escape)</li>
        <li>High contrast elements for visibility</li>
        <li>Screen reader compatible structure</li>
      </ul>
      
      <h3>Credits</h3>
      <p>Based on materials from:</p>
      <ul style="margin-bottom: 1.5rem; padding-left: 1.5rem;">
        <li>UCL Positionality Paper Guide (Dr. Adam Crymble)</li>
        <li>"Explaining Change in Germany's Anti-corruption Policy" by Sebastian Wolf</li>
        <li>"Corruption in Germany: The Debate in Politics and Political Science" by Ulrich von Alemann</li>
      </ul>
      
      <p><em>This tool is for educational purposes only.</em></p>
    </div>
  </div>
  
  <script>
    // DOM Elements
    const essayForm = document.getElementById('essayForm');
    const generateEssayBtn = document.getElementById('generateEssay');
    const essayOutput = document.getElementById('essayOutput');
    const articleUpload = document.getElementById('articleUpload');
    const uploadedFiles = document.getElementById('uploadedFiles');
    const copyLinkBtn = document.getElementById('copyLinkBtn');
    const copyStatus = document.getElementById('copyStatus');
    const accessibilityBtn = document.getElementById('accessibilityBtn');
    const resetBtn = document.getElementById('resetBtn');
    const printBtn = document.getElementById('printBtn');
    const saveReflectionBtn = document.getElementById('saveReflection');
    const uploadArea = document.getElementById('uploadArea');
    
    // Essay Structure Generator
    generateEssayBtn.addEventListener('click', function() {
      const topic = document.getElementById('essayTopic').value.trim();
      const thesis = document.getElementById('essayThesis').value.trim();
      const sections = document.getElementById('essaySections').value.split(',').map(s => s.trim()).filter(s => s.length);
      
      if (!topic || !thesis || sections.length === 0) {
        essayOutput.innerHTML = `<div class="status-error status-message">Please fill in all fields to generate your essay structure.</div>`;
        return;
      }
      
      let html = `<h3>Essay Structure: ${topic}</h3>`;
      html += `<p><strong>Thesis Statement:</strong> ${thesis}</p>`;
      html += `<h4>Outline:</h4><ol>`;
      
      sections.forEach((section, index) => {
        html += `<li><strong>${section}</strong>`;
        
        // Add suggested content based on section title
        const suggestions = getSectionSuggestions(section, index, topic);
        if (suggestions) {
          html += `<ul style="margin-top: 5px; margin-bottom: 15px;">`;
          suggestions.forEach(suggestion => {
            html += `<li style="color: var(--gray-color); font-size: 0.9rem;">${suggestion}</li>`;
          });
          html += `</ul>`;
        }
        
        html += `</li>`;
      });
      
      html += `</ol>`;
      html += `<div class="status-success status-message">Essay structure generated successfully! You can now expand each section with your research.</div>`;
      
      essayOutput.innerHTML = html;
      essayOutput.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    });
    
    // Function to provide section suggestions
    function getSectionSuggestions(sectionTitle, index, topic) {
      const section = sectionTitle.toLowerCase();
      const suggestions = [];
      
      if (section.includes('intro')) {
        suggestions.push('Define key terms: corruption, anti-corruption policy');
        suggestions.push('Present the research question');
        suggestions.push('Outline the structure of the essay');
      } else if (section.includes('context') || section.includes('background')) {
        suggestions.push('Brief history of corruption in Germany');
        suggestions.push('Key legal and institutional frameworks');
        suggestions.push('Major corruption scandals in recent decades');
      } else if (section.includes('theor') || section.includes('framework')) {
        suggestions.push('Multiple streams approach (Kingdon)');
        suggestions.push('Neo-institutionalist perspectives');
        suggestions.push('Veto players theory');
      } else if (section.includes('analysis') || section.includes('case')) {
        suggestions.push('Analyze specific anti-corruption reforms');
        suggestions.push('Compare different government periods');
        suggestions.push('Examine political party roles (SPD as policy entrepreneur)');
      } else if (section.includes('limitation') || section.includes('challenge')) {
        suggestions.push('Data availability on corruption');
        suggestions.push('Methodological constraints');
        suggestions.push('Political sensitivities');
      } else if (section.includes('conclu')) {
        suggestions.push('Summarize key findings');
        suggestions.push('Restate thesis in light of evidence');
        suggestions.push('Suggest areas for further research');
      } else {
        suggestions.push('Connect to your thesis statement');
        suggestions.push('Use evidence from the provided articles');
        suggestions.push('Consider positionality in your analysis');
      }
      
      return suggestions;
    }
    
    // Article Upload Handler
    articleUpload.addEventListener('change', function(e) {
      const files = Array.from(e.target.files);
      
      files.forEach(file => {
        const listItem = document.createElement('li');
        listItem.innerHTML = `
          <div class="file-name">${file.name}</div>
          <div class="file-size">${(file.size / 1024).toFixed(1)} KB</div>
        `;
        uploadedFiles.appendChild(listItem);
      });
      
      // Show success message
      const status = document.createElement('div');
      status.className = 'status-success status-message';
      status.textContent = `${files.length} file(s) uploaded successfully.`;
      uploadedFiles.parentNode.insertBefore(status, uploadedFiles);
      
      // Clear file input
      articleUpload.value = '';
      
      // Remove message after 3 seconds
      setTimeout(() => {
        status.remove();
      }, 3000);
    });
    
    // Drag and drop for upload area
    uploadArea.addEventListener('dragover', function(e) {
      e.preventDefault();
      uploadArea.style.borderColor = 'var(--primary-color)';
      uploadArea.style.backgroundColor = 'rgba(0, 87, 184, 0.1)';
    });
    
    uploadArea.addEventListener('dragleave', function(e) {
      e.preventDefault();
      uploadArea.style.borderColor = '';
      uploadArea.style.backgroundColor = '';
    });
    
    uploadArea.addEventListener('drop', function(e) {
      e.preventDefault();
      uploadArea.style.borderColor = '';
      uploadArea.style.backgroundColor = '';
      
      const files = e.dataTransfer.files;
      const fileArray = Array.from(files);
      
      // Simulate file input change
      const dataTransfer = new DataTransfer();
      fileArray.forEach(file => dataTransfer.items.add(file));
      articleUpload.files = dataTransfer.files;
      
      // Trigger change event
      articleUpload.dispatchEvent(new Event('change'));
    });
    
    // Copy Link Functionality
    copyLinkBtn.addEventListener('click', function() {
      navigator.clipboard.writeText(window.location.href)
        .then(() => {
          copyStatus.textContent = 'Page link copied to clipboard!';
          copyStatus.className = 'status-success status-message';
          copyStatus.style.display = 'block';
        })
        .catch(err => {
          copyStatus.textContent = 'Failed to copy link. Please try again.';
          copyStatus.className = 'status-error status-message';
          copyStatus.style.display = 'block';
        });
      
      setTimeout(() => {
        copyStatus.style.display = 'none';
      }, 3000);
    });
    
    // Print Functionality
    printBtn.addEventListener('click', function() {
      // Create a printable version
      const printContent = `
        <html>
          <head>
            <title>Corruption in Germany - Research Resources</title>
            <style>
              body { font-family: Arial, sans-serif; line-height: 1.6; }
              h1 { color: #0057b8; border-bottom: 2px solid #ffcc00; }
              h2 { color: #333; border-bottom: 1px solid #ddd; }
              ul { padding-left: 20px; }
              a { color: #0057b8; text-decoration: none; }
              a::after { content: " (" attr(href) ")"; font-size: 0.9em; }
              .section { margin-bottom: 30px; }
              .article { margin-bottom: 20px; padding: 10px; border-left: 3px solid #4CAF50; }
            </style>
          </head>
          <body>
            <h1>Corruption in Germany: Research Resources</h1>
            <p>Generated from the Corruption in Germany Research Tool</p>
            
            <div class="section">
              <h2>Open-Access Resources</h2>
              <ul>
                <li><a href="https://www.semanticscholar.org/search?q=corruption%20Germany">Semantic Scholar: Corruption in Germany</a></li>
                <li><a href="https://archive.org/search.php?query=corruption+germany">Internet Archive: Corruption Germany</a></li>
                <li><a href="https://doaj.org/search?source=%7B%22query%22%3A%7B%22query_string%22%3A%7B%22query%22%3A%22corruption+germany%22%7D%7D%7D%7D">DOAJ: Corruption Germany</a></li>
                <li><a href="https://en.wikipedia.org/wiki/Corruption_in_Germany">Corruption in Germany (Wikipedia)</a></li>
              </ul>
            </div>
            
            <div class="section">
              <h2>Key Articles</h2>
              <div class="article">
                <h3>Explaining Change in Germany's Anti-corruption Policy in the Era of Chancellor Merkel</h3>
                <p><strong>Author:</strong> Sebastian Wolf</p>
                <p><strong>Summary:</strong> Analyzes anti-corruption reforms during Merkel's governments using the multiple streams approach, highlighting the SPD as a policy entrepreneur during the 2013-2017 grand coalition.</p>
              </div>
              
              <div class="article">
                <h3>Corruption in Germany: The Debate in Politics and Political Science</h3>
                <p><strong>Author:</strong> Ulrich von Alemann</p>
                <p><strong>Summary:</strong> Examines the German debate on corruption, challenging the myth of an "extremely honest" civil service and proposing corruption as "shadow politics."</p>
              </div>
            </div>
            
            <div class="section">
              <h2>Positionality Writing Tips</h2>
              <p>When writing about corruption in Germany, consider:</p>
              <ul>
                <li>Your personal background and how it shapes your perspective</li>
                <li>The political and institutional context of your analysis</li>
                <li>How your position compares to other researchers in the field</li>
                <li>Strategies for addressing bias in your research</li>
              </ul>
            </div>
            
            <p style="margin-top: 40px; font-size: 0.9em; color: #666;">
              Printed from: ${window.location.href}<br>
              Generated on: ${new Date().toLocaleDateString()}
            </p>
          </body>
        </html>
      `;
      
      const printWindow = window.open('', '_blank');
      printWindow.document.write(printContent);
      printWindow.document.close();
      printWindow.focus();
      setTimeout(() => {
        printWindow.print();
      }, 250);
    });
    
    // Save Reflection
    saveReflectionBtn.addEventListener('click', function() {
      const reflection = document.getElementById('positionalityReflection').value;
      const strategy = document.getElementById('growthStrategy').value;
      
      if (!reflection.trim()) {
        alert('Please enter your reflection before saving.');
        return;
      }
      
      // In a real application, this would save to localStorage or a server
      // For this demo, we'll just show a confirmation
      const strategies = {
        'compromise': 'Strategies for compromising',
        'growth': 'Acknowledging personal growth',
        'dig-in': 'Digging in your heels (with strategy)'
      };
      
      alert(`Reflection saved!\n\nStrategy: ${strategies[strategy]}\n\nYour reflection has been saved locally. In a full application, this would be stored for future reference.`);
      
      // Clear the textarea
      document.getElementById('positionalityReflection').value = '';
    });
    
    // Accessibility Modal
    accessibilityBtn.addEventListener('click', function() {
      document.getElementById('accessibilityModal').style.display = 'block';
    });
    
    function closeAccessibilityModal() {
      document.getElementById('accessibilityModal').style.display = 'none';
    }
    
    // Article Summary Modal Functions
    function showArticleSummary(articleId) {
      const modal = document.getElementById('articleModal');
      const modalContent = document.getElementById('modalContent');
      
      let content = '';
      
      if (articleId === 1) {
        content = `
          <h2>Explaining Change in Germany's Anti-corruption Policy in the Era of Chancellor Merkel</h2>
          <p><strong>Author:</strong> Sebastian Wolf</p>
          <p><strong>Published:</strong> 2021, <em>German Politics and Society</em></p>
          
          <h3>Key Findings</h3>
          <ul>
            <li>Merkel's second grand coalition (2013-2017) was the most successful in anti-corruption reforms since 2005</li>
            <li>Applies Kingdon's multiple streams approach to explain policy change</li>
            <li>Identifies SPD as crucial policy entrepreneur during this period</li>
            <li>CDU/CSU did not fully use veto power, allowing reforms to pass</li>
            <li>Three case studies: bribery of parliamentarians, international corruption laws, "revolving door" regulations</li>
          </ul>
          
          <h3>Theoretical Framework</h3>
          <p>The article uses the <strong>multiple streams approach</strong>, which explains policy change through the coupling of:</p>
          <ol>
            <li><strong>Problem stream:</strong> Recognition of corruption as a policy problem</li>
            <li><strong>Policy stream:</strong> Availability of viable policy solutions</li>
            <li><strong>Political stream:</strong> Favorable political conditions and entrepreneurs</li>
          </ol>
          
          <h3>Research Significance</h3>
          <p>This study challenges neo-institutionalist explanations that focus only on path-dependencies, showing how specific political constellations enabled reform despite institutional inertia.</p>
        `;
      } else if (articleId === 2) {
        content = `
          <h2>Corruption in Germany: The Debate in Politics and Political Science</h2>
          <p><strong>Author:</strong> Ulrich von Alemann</p>
          <p><strong>Published:</strong> 1995, conference paper</p>
          
          <h3>Key Arguments</h3>
          <ul>
            <li>Challenges Theodor Eschenburg's thesis about Germany's "extremely honest" civil service</li>
            <li>Argues corruption is not uncommon in Germany and occurs quite frequently</li>
            <li>Proposes understanding corruption as "shadow politics" - the informal side of political systems</li>
            <li>Presents a comprehensive research agenda for corruption studies</li>
          </ul>
          
          <h3>Definition of Corruption</h3>
          <p>Von Alemann defines corruption through an exchange logic with seven components:</p>
          <ol>
            <li>A buyer (corrupter) wants a rare good (order, license, position)</li>
            <li>A seller (corruptee) can assign this good</li>
            <li>The corruptee receives an additional incentive (beyond normal price)</li>
            <li>This violates accepted moral standards</li>
            <li>It damages third-party or public interests</li>
            <li>Therefore, it is hidden and concealed</li>
          </ol>
          
          <h3>Research Agenda</h3>
          <p>The article outlines 11 steps for systematic corruption research, including typologies, levels, actors, causes, consequences, and anti-corruption strategies.</p>
        `;
      }
      
      modalContent.innerHTML = content;
      modal.style.display = 'block';
    }
    
    function closeModal() {
      document.getElementById('articleModal').style.display = 'none';
    }
    
    // Positionality Tips
    function showPositionalityTips() {
      const modal = document.getElementById('articleModal');
      const modalContent = document.getElementById('modalContent');
      
      modalContent.innerHTML = `
        <h2><i class="fas fa-lightbulb"></i> Positionality Writing Tips</h2>
        
        <h3>Why Positionality Matters in Corruption Research</h3>
        <p>Your background influences how you perceive and analyze corruption:</p>
        <ul>
          <li><strong>Nationality:</strong> Affects your perspective on German institutions vs. other systems</li>
          <li><strong>Political views:</strong> Shapes your interpretation of policy successes/failures</li>
          <li><strong>Academic discipline:</strong> Lawyers, economists, and political scientists approach corruption differently</li>
          <li><strong>Personal experience:</strong> Direct experience with corruption affects your analysis</li>
        </ul>
        
        <h3>Writing Strategies</h3>
        <p><strong>Option A (Personal first):</strong> "As someone who grew up in [context], I initially viewed corruption as [perspective]. However, researching [author]'s work has challenged this view by showing [insight]."</p>
        
        <p><strong>Option B (Literature first):</strong> "[Author] approaches corruption from a [disciplinary] perspective, emphasizing [aspect]. While this illuminates [strength], my [background] leads me to also consider [additional factor]."</p>
        
        <p><strong>Option C (Contextual factors):</strong> "The debate on corruption in Germany revolves around [key factors]. My position aligns with [perspective] on [factor 1] but diverges on [factor 2] due to my [experience/background]."</p>
        
        <h3>Reflective Questions</h3>
        <ul>
          <li>How might my political views bias my interpretation of anti-corruption policies?</li>
          <li>Does my disciplinary training emphasize certain aspects of corruption over others?</li>
          <li>How does my cultural background affect what I consider "corrupt" vs. "acceptable"?</li>
          <li>What personal experiences might make me more or less critical of certain actors?</li>
        </ul>
        
        <div class="status-success status-message" style="margin-top: 1.5rem;">
          <strong>Tip:</strong> Being transparent about your positionality strengthens your research by acknowledging potential biases and clarifying your analytical perspective.
        </div>
      `;
      
      modal.style.display = 'block';
    }
    
    // Reset Functionality
    resetBtn.addEventListener('click', function() {
      if (confirm('Are you sure you want to reset all forms and clear uploaded files?')) {
        // Reset forms
        document.getElementById('essayForm').reset();
        document.getElementById('reflectionForm').reset();
        
        // Clear outputs
        essayOutput.innerHTML = `<h3>Your Essay Structure Will Appear Here</h3><p>Fill out the form above and click "Generate Essay Structure"</p>`;
        
        // Clear uploaded files
        uploadedFiles.innerHTML = '';
        
        // Reset checkboxes to default
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
          if (checkbox.id === 'nationality' || checkbox.id === 'politics' || checkbox.id === 'education' || 
              checkbox.id === 'feature1' || checkbox.id === 'feature2') {
            checkbox.checked = true;
          } else {
            checkbox.checked = false;
          }
        });
        
        // Show confirmation
        const status = document.createElement('div');
        status.className = 'status-success status-message';
        status.textContent = 'All forms have been reset.';
        status.style.position = 'fixed';
        status.style.top = '20px';
        status.style.right = '20px';
        status.style.zIndex = '1001';
        document.body.appendChild(status);
        
        setTimeout(() => {
          status.remove();
        }, 3000);
      }
    });
    
    // Initialize with a sample essay structure
    window.addEventListener('DOMContentLoaded', function() {
      // Generate a sample essay structure on load
      setTimeout(() => {
        generateEssayBtn.click();
      }, 500);
      
      // Close modals when clicking outside
      window.addEventListener('click', function(event) {
        const articleModal = document.getElementById('articleModal');
        const accessibilityModal = document.getElementById('accessibilityModal');
        
        if (event.target === articleModal) {
          articleModal.style.display = 'none';
        }
        
        if (event.target === accessibilityModal) {
          accessibilityModal.style.display = 'none';
        }
      });
      
      // Close modals with Escape key
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
          document.getElementById('articleModal').style.display = 'none';
          document.getElementById('accessibilityModal').style.display = 'none';
        }
      });
    });
    
    // Simple translation toggle simulation
    document.getElementById('feature3').addEventListener('change', function() {
      if (this.checked) {
        alert('Translation feature enabled. In a full implementation, this would integrate with a translation API or widget.');
      }
    });
  </script>
</body>
</html>
