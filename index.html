<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Corruption in Germany - Resource & Essay Tool</title>
  <link rel="stylesheet" href="styles.css">
  <script>
    // Google Translate Integration (Client-side UI only)
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
    }
  </script>
  <style>
    /* Basic accessibility and modal styles */
    .modal { display: none; position: fixed; z-index: 999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background: rgba(0,0,0,0.5); }
    .modal-content { background: #fff; margin: 10% auto; padding: 20px; border-radius: 8px; width: 90%; max-width: 600px; position: relative; }
    .close-modal { position: absolute; top: 12px; right: 16px; font-size: 28px; cursor: pointer; }
    button, input, textarea, select { font-size: 1em; }
    button:focus, input:focus, select:focus, textarea:focus { outline: 2px solid #0057b8; }
  </style>
</head>
<body>
  <header>
    <h1>Corruption in Germany: Open-Access Resources & Essay Assistant</h1>
    <nav aria-label="Open-access scholarly links">
      <ul>
        <li><a href="https://www.semanticscholar.org/search?q=corruption%20Germany" target="_blank" rel="noopener">Semantic Scholar: Corruption in Germany</a></li>
        <li><a href="https://archive.org/search.php?query=corruption+germany" target="_blank" rel="noopener">Internet Archive: Corruption Germany</a></li>
        <li><a href="https://doaj.org/search?source=%7B%22query%22%3A%7B%22query_string%22%3A%7B%22query%22%3A%22corruption+germany%22%7D%7D%7D%7D" target="_blank" rel="noopener">DOAJ: Corruption Germany</a></li>
        <li><a href="https://en.wikipedia.org/wiki/Corruption_in_Germany" target="_blank" rel="noopener">Corruption in Germany (Wikipedia)</a></li>
      </ul>
    </nav>
  </header>

  <!-- Google Translate Widget (Client-side) -->
  <div id="google_translate_element" aria-label="Translate site"></div>
  <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

  <main>
    <section>
      <h2>Generate Essay Structure</h2>
      <form id="structureForm" aria-label="Essay structure parameters">
        <label for="topic">Topic:</label>
        <input type="text" id="topic" required aria-required="true">

        <label for="thesis">Thesis Statement:</label>
        <input type="text" id="thesis" required aria-required="true">

        <label for="sections">Sections (comma separated):</label>
        <input type="text" id="sections" placeholder="Introduction, Background, Analysis, Conclusion" required aria-required="true">

        <button type="submit">Generate Structure</button>
      </form>
      <div id="essayStructure" tabindex="0" aria-live="polite"></div>
    </section>

    <section>
      <h2>Upload & Preview Articles</h2>
      <input type="file" id="articleUpload" multiple aria-label="Upload articles">
      <ul id="uploadedArticles" aria-label="Uploaded article list"></ul>
    </section>

    <section>
      <h2>Select Features</h2>
      <div id="dynamicFeatures" aria-label="Additional features"></div>
    </section>
  </main>

  <footer>
    <button id="openModal" aria-haspopup="dialog">Accessibility & Credits</button>
    <button id="copyLink">Copy Page Link</button>
    <span id="copyStatus" aria-live="polite"></span>
    <!-- Accessible Modal Popup -->
    <div class="modal" id="modalDialog" aria-modal="true" role="dialog" tabindex="-1">
      <div class="modal-content">
        <span class="close-modal" id="closeModal" title="Close" aria-label="Close">&times;</span>
        <h2>Accessibility & Credits</h2>
        <ul>
          <li>All article links are open-access/free (Semantic Scholar, Internet Archive, DOAJ)</li>
          <li>Translation powered by Google Translate widget (free UI, client-side only)</li>
          <li>All preview and upload features are client-side onlyâ€”no server code, no paid APIs</li>
          <li>Accessible navigation, modals, and dynamic controls</li>
        </ul>
      </div>
    </div>
  </footer>

  <script>
    // External links: already set with target="_blank" and rel="noopener"

    // Essay structure generation
    document.getElementById('structureForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const topic = document.getElementById('topic').value.trim();
      const thesis = document.getElementById('thesis').value.trim();
      const sections = document.getElementById('sections').value.split(',').map(s => s.trim()).filter(s => s.length);
      let html = `<h3>Essay Structure: ${topic}</h3><p><b>Thesis:</b> ${thesis}</p><ol>`;
      sections.forEach((sec, i) => {
        html += `<li id="section${i}">${sec}</li>`;
      });
      html += `</ol>`;
      document.getElementById('essayStructure').innerHTML = html;
    });

    // Dynamic checkboxes (feature selection example)
    const features = [
      { id: 'oa', label: 'Open-access only' },
      { id: 'translate', label: 'Enable translation (Google Translate UI)' },
      { id: 'preview', label: 'Preview uploads client-side' },
      { id: 'accessible', label: 'Accessibility improvements' }
    ];
    const dynamicFeatures = document.getElementById('dynamicFeatures');
    features.forEach(f => {
      const wrapper = document.createElement('div');
      wrapper.innerHTML = `<input type="checkbox" id="${f.id}" checked><label for="${f.id}">${f.label}</label>`;
      dynamicFeatures.appendChild(wrapper);
    });

    // Upload & Preview articles (client-side only)
    document.getElementById('articleUpload').addEventListener('change', function(e) {
      const fileList = e.target.files;
      const uploadedArticles = document.getElementById('uploadedArticles');
      uploadedArticles.innerHTML = '';
      Array.from(fileList).forEach(file => {
        const listItem = document.createElement('li');
        listItem.setAttribute('tabindex', '0');
        listItem.innerHTML = `<b>${file.name}</b> (${(file.size/1024).toFixed(1)} KB)`;
        // Provide preview for text and PDF (if desired)
        if (file.type === 'text/plain' || file.name.endsWith('.txt')) {
          const reader = new FileReader();
          reader.onload = function(e) {
            const pre = document.createElement('pre');
            pre.textContent = e.target.result;
            pre.setAttribute('aria-label', `Preview of ${file.name}`);
            listItem.appendChild(pre);
          };
          reader.readAsText(file);
        }
        uploadedArticles.appendChild(listItem);
      });
    });

    // Copy-to-clipboard feature
    document.getElementById('copyLink').addEventListener('click', function() {
      navigator.clipboard.writeText(window.location.href)
        .then(() => {
          document.getElementById('copyStatus').textContent = 'Page link copied!';
        })
        .catch(() => {
          document.getElementById('copyStatus').textContent = 'Failed to copy.';
        });
      setTimeout(() => { document.getElementById('copyStatus').textContent = ''; }, 2500);
    });

    // Modal feature
    document.getElementById('openModal').addEventListener('click', function() {
      const modal = document.getElementById('modalDialog');
      modal.style.display = 'block';
      modal.focus();
    });
    document.getElementById('closeModal').addEventListener('click', function() {
      document.getElementById('modalDialog').style.display = 'none';
    });
    // Accessibility for modal (Esc to close)
    document.getElementById('modalDialog').addEventListener('keydown', function(e) {
      if(e.key === 'Escape') {
        document.getElementById('modalDialog').style.display = 'none';
      }
    });
  </script>
</body>
</html>